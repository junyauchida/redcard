<h1>カードリスト編集</h1>

<%= form_for (@cardlist) do |f| %>
<%= f.text_field :cardlist_name %>
<%= f.submit "更新" %>
<%end%>
<br>

<%= form_for [@cardlist, @card] do |c| %>
<%= c.text_area :front, :size => "40x5" %>
<%= c.text_area :back, :size => "40x5" %>
<%= c.submit "登録" %>
<%end%>
<br>

<h4>
<span>覚えたカード <%= num1 = @cards.where(check: 'true').count %>枚</span>
<br>
<span>全てのカード <%= num2 = @cards.count %>枚</span>
</h4>

<% num = (num1.to_f / num2).round(2)  %>
<% num = (num*100).to_i %>

<div class="progress">
	<div class="progress-bar progress-bar-danger progress-bar-striped active" role="progressbar" style="width:<%= num %>%;">
		<%= num %>%
	</div>
</div>

<table class="table table-hover">
	<thead>
		<tr>
			<th>表</th>
			<th>裏</th>
			<th></th>
			<th></th>
			<th></th>
		</tr>
	</thead>
	<tbody>
		<% @cardlist.cards.each do |card| %>
	    <%= form_for ([@cardlist, card]) do |f|%>
		<tr>
			<td><%= f.text_area :front, :size => "40x5" %></td>
			<td><%= f.text_area :back, :size => "40x5" %></td>
			<td><%= f.submit "更新" %></td>
			<td>
			  <%= link_to "削除", cardlist_card_path(@cardlist.id, card.id), method: :delete, "data-confirm"=>"本当に削除しますか？" %>
			</td>
			<td>
		      <% if card.check == false %>
			    <%= link_to '覚えてない！', cardlist_update2_path(@cardlist.id, card.id),method: :patch %>
		      <% else %>
			    <%= link_to '覚えた！' , cardlist_update2_path(@cardlist.id, card.id),method: :patch %>
		      <% end %>
			</td>
		</tr>
		<% end %>
        <% end %>
	</tbody>
</table>

<h1><%= link_to "学習", cardlist_path(@cardlist.id) %></h1>

<!--  -->
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
  <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
  <link rel="stylesheet" href="/demos/style.css" />
  <style>
  #sortable1, #sortable2 { list-style-type: none; margin: 0; padding: 0; margin-bottom: 15px;zoom: 1; }
  #sortable1 li, #sortable2 li { margin: 0 5px 5px 5px; padding: 5px; font-size: 1.2em; width: 95%; }
  </style>
  <script>
  $(function() {
    $( "#sortable1" ).sortable({
      delay: 300
    });
    $( "#sortable2" ).sortable({
      distance: 15
    });
    $( "li" ).disableSelection();
  });
  </script>
</head>

<body>
<h3 class="docs">300ms遅延:</h3>
<ul id="sortable1">
  <li class="ui-state-default">項目 1</li>
  <li class="ui-state-default">項目 2</li>
  <li class="ui-state-default">項目 3</li>
  <li class="ui-state-default">項目 4</li>
</ul>
<h3 class="docs">15px遅延:</h3>
<ul id="sortable2">
  <li class="ui-state-default">項目 1</li>
  <li class="ui-state-default">項目 2</li>
  <li class="ui-state-default">項目 3</li>
  <li class="ui-state-default">項目 4</li>
</ul>
</body>

<!--  -->
<!-- <table class="table table-hover">
	<thead>
		<tr>
			<th>表</th>
			<th>裏</th>
			<th></th>
			<th></th>
			<th></th>
		</tr>
	</thead>
	<tbody>
		<% @cardlist.cards.each do |card| %>
	    <%= form_for ([@cardlist, card]) do |f|%>
		<tr>
			<td><%= f.text_area :front, :size => "40x5" %></td>
			<td><%= f.text_area :back, :size => "40x5" %></td>
			<td><%= f.submit "更新" %></td>
			<td>
			  <%= link_to "削除", cardlist_card_path(@cardlist.id, card.id), method: :delete, "data-confirm"=>"本当に削除しますか？" %>
			</td>
			<td>
		      <% if card.check == false %>
			    <%= link_to '覚えてない！', cardlist_update2_path(@cardlist.id, card.id),method: :patch %>
		      <% else %>
			    <%= link_to '覚えた！' , cardlist_update2_path(@cardlist.id, card.id),method: :patch %>
		      <% end %>
			</td>
		</tr>
		<% end %>
        <% end %>
	</tbody>
</table> -->